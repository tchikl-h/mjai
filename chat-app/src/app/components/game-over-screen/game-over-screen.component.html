<div class="game-over-overlay">
  <div class="game-over-content">
    <!-- Game Over Header -->
    <div class="defeat-header">
      <div class="defeat-icon">{{ getFailureIcon() }}</div>
      <h1 class="defeat-title">{{ endReason.message }}</h1>
      <p class="defeat-subtitle">{{ endReason.details }}</p>
    </div>

    <!-- Game Stats -->
    <div class="game-stats">
      <h3>{{ i18n.translate('game.final.stats') }}</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value">{{ finalTurn }}</span>
          <span class="stat-label">{{ finalTurn === 1 ? i18n.translate('turn.number') : i18n.translate('turn.number') + 's' }}</span>
        </div>
        <div class="stat-item" *ngIf="endReason.status !== GameStatus.LOST_ALL_DEAD">
          <span class="stat-value">{{ getAlivePlayers().length }}</span>
          <span class="stat-label">{{ i18n.language() === 'fr' ? 'Survivants' : 'Survivors' }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ getCompletedChallenges().length }}</span>
          <span class="stat-label">{{ i18n.language() === 'fr' ? 'D√©fis R√©ussis' : 'Challenges Completed' }}</span>
        </div>
      </div>
    </div>

    <!-- Survivors Section (if any) -->
    <div class="survivors-section" *ngIf="getAlivePlayers().length > 0">
      <h3>{{ i18n.language() === 'fr' ? 'Survivants' : 'Survivors' }}</h3>
      <div class="player-list">
        <div 
          *ngFor="let player of getAlivePlayers()" 
          class="survivor-player">
          <img [src]="player.imageUri" [alt]="player.name" class="survivor-avatar">
          <div class="survivor-player-info">
            <span class="survivor-player-name">{{ player.name }}</span>
            <div class="survivor-health">
              <span *ngFor="let heart of [1,2,3]; let i = index" 
                    class="survivor-heart"
                    [class.filled]="i < player.health">
                {{ i < player.health ? '‚ù§Ô∏è' : 'ü§ç' }}
              </span>
            </div>
          </div>
          <div class="survivor-status">
            <span *ngIf="player.challengeResolved" class="challenge-completed">‚úÖ</span>
            <span *ngIf="!player.challengeResolved" class="challenge-incomplete">‚è≥</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Fallen Heroes Section -->
    <div class="fallen-section" *ngIf="getDeadPlayers().length > 0">
      <h3>{{ i18n.language() === 'fr' ? 'H√©ros Tomb√©s' : 'Fallen Heroes' }}</h3>
      <div class="fallen-list">
        <div 
          *ngFor="let player of getDeadPlayers()" 
          class="fallen-player">
          <div class="fallen-avatar-container">
            <img [src]="player.imageUri" [alt]="player.name" class="fallen-avatar">
            <div class="fallen-overlay">üíÄ</div>
          </div>
          <span class="fallen-player-name">{{ player.name }}</span>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="game-over-actions">
      <button class="restart-button" (click)="onRestart()">
        {{ i18n.translate('game.restart') }}
      </button>
    </div>

    <!-- Atmospheric Effects -->
    <div class="gloom-particles">
      <div class="gloom-particle" *ngFor="let i of [1,2,3,4,5,6]">üí®</div>
    </div>
  </div>
</div>