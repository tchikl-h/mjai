<div class="game-over-overlay">
  <div class="game-over-content">
    <!-- Game Over Header -->
    <div class="defeat-header">
      <div class="defeat-icon">{{ getFailureIcon() }}</div>
      <h1 class="defeat-title">{{ endReason.message }}</h1>
      <p class="defeat-subtitle">{{ endReason.details }}</p>
    </div>

    <!-- Game Stats -->
    <div class="game-stats">
      <h3>{{ i18n.translate('game.final.stats') }}</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value">{{ finalTurn }}</span>
          <span class="stat-label">{{ finalTurn === 1 ? i18n.translate('turn.number') : i18n.translate('turn.number') + 's' }}</span>
        </div>
        <div class="stat-item" *ngIf="endReason.status !== GameStatus.LOST_ALL_DEAD">
          <span class="stat-value">{{ getAlivePlayers().length }}</span>
          <span class="stat-label">{{ i18n.language() === 'fr' ? 'Survivants' : 'Survivors' }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ getCompletedChallenges().length }}</span>
          <span class="stat-label">{{ i18n.language() === 'fr' ? 'Défis Réussis' : 'Challenges Completed' }}</span>
        </div>
      </div>
    </div>

    <!-- Survivors Section (if any) -->
    <div class="survivors-section" *ngIf="getAlivePlayers().length > 0">
      <h3>{{ i18n.language() === 'fr' ? 'Survivants' : 'Survivors' }}</h3>
      <div class="player-list">
        <div 
          *ngFor="let player of getAlivePlayers()" 
          class="survivor-player">
          <img [src]="player.imageUri" [alt]="player.name" class="survivor-avatar">
          <div class="survivor-player-info">
            <span class="survivor-player-name">{{ player.name }}</span>
            <div class="survivor-health">
              <span *ngFor="let heart of [1,2,3]; let i = index" 
                    class="survivor-heart"
                    [class.filled]="i < player.health">
                {{ i < player.health ? '❤️' : '🤍' }}
              </span>
            </div>
          </div>
          <div class="survivor-status">
            <span *ngIf="player.challengeResolved" class="challenge-completed">✅</span>
            <span *ngIf="!player.challengeResolved" class="challenge-incomplete">⏳</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Fallen Heroes Section -->
    <div class="fallen-section" *ngIf="getDeadPlayers().length > 0">
      <h3>{{ i18n.language() === 'fr' ? 'Héros Tombés' : 'Fallen Heroes' }}</h3>
      <div class="fallen-list">
        <div 
          *ngFor="let player of getDeadPlayers()" 
          class="fallen-player">
          <div class="fallen-avatar-container">
            <img [src]="player.imageUri" [alt]="player.name" class="fallen-avatar">
            <div class="fallen-overlay">💀</div>
          </div>
          <span class="fallen-player-name">{{ player.name }}</span>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="game-over-actions">
      <button class="restart-button" (click)="onRestart()">
        {{ i18n.translate('game.restart') }}
      </button>
    </div>

    <!-- Enhanced Atmospheric Effects -->
    <div class="gloom-particles">
      <div class="gloom-particle" *ngFor="let i of [1,2,3,4,5,6]">🌪️</div>
    </div>
    
    <!-- Additional visual effects -->
    <div class="blood-drops" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden;">
      <div class="blood-drop" style="position: absolute; top: 10%; left: 20%; color: rgba(139, 0, 0, 0.4); font-size: 0.8rem; animation: fadeInUp 3s ease-out 2s both;">🩸</div>
      <div class="blood-drop" style="position: absolute; top: 30%; left: 70%; color: rgba(139, 0, 0, 0.4); font-size: 0.6rem; animation: fadeInUp 3s ease-out 2.5s both;">🩸</div>
      <div class="blood-drop" style="position: absolute; top: 70%; left: 15%; color: rgba(139, 0, 0, 0.4); font-size: 0.7rem; animation: fadeInUp 3s ease-out 3s both;">🩸</div>
      <div class="blood-drop" style="position: absolute; top: 85%; left: 80%; color: rgba(139, 0, 0, 0.4); font-size: 0.5rem; animation: fadeInUp 3s ease-out 3.5s both;">🩸</div>
    </div>
  </div>
</div>