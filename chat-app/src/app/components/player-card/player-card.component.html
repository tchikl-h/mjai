<div class="player-card" 
     [ngClass]="{
       'current-player': isCurrentPlayer,
       'eliminated-player': !player.isAlive(),
       'small': size === 'small',
       'clickable': clickable
     }"
     (click)="onClick()"
     [style.cursor]="clickable ? 'pointer' : 'default'"
     [title]="clickable ? 'Click to make ' + player.name + ' the active player' : ''">
  
  <!-- Edit and Delete buttons in top right corner -->
  <div class="card-actions" *ngIf="showControls && size !== 'small'">
    <button 
      class="edit-button"
      (click)="onEditClick($event)"
      [title]="'Edit ' + player.name"
      type="button">
      <mat-icon>edit</mat-icon>
    </button>
    <button 
      class="delete-button"
      (click)="onDeleteClick($event)"
      [title]="'Delete ' + player.name"
      type="button">
      <mat-icon>delete</mat-icon>
    </button>
  </div>

  <div class="player-info">
    <div class="avatar-container">
      <img [src]="player.imageUri" [alt]="player.name" class="player-avatar">
      <div *ngIf="!player.isAlive()" class="eliminated-overlay">
        <span class="eliminated-text">💀</span>
      </div>
    </div>
    
    <div class="player-details">
      <span class="player-name" [class.eliminated]="!player.isAlive()">{{ player.name }}</span>
      <div class="player-health">
        <span 
          *ngFor="let heart of [1,2,3]; let i = index" 
          class="heart"
          [class.filled]="i < player.health"
          [class.empty]="i >= player.health"
          [class.disabled]="!player.isAlive() || !showControls"
          [class.small]="size === 'small'"
          (click)="onHealthToggle(i); $event.stopPropagation()"
          [title]="!player.isAlive() ? i18n.translate('player.eliminated') : !showControls ? '' : (i < player.health ? i18n.translate('health.remove') : i18n.translate('health.add'))">
          {{ i < player.health ? '❤️' : '🤍' }}
        </span>
        <!-- Speak button -->
        <button 
          *ngIf="player.isAlive() && showControls"
          class="speak-button"
          [class.small]="size === 'small'"
          (click)="onSpeakClick($event)"
          [title]="'Make ' + player.name + ' respond'"
          type="button">
          🗣️
        </button>
        <!-- Trait icon - DEACTIVATED -->
        <!--
        <span 
          class="trait-icon" 
          [class.small]="size === 'small'"
          [title]="getTraitTooltip()">
          {{ getTraitIcon() }}
        </span>
        -->
      </div>
    </div>
  </div>
  
  <div *ngIf="!player.isAlive()" class="eliminated-status">{{ i18n.translate('eliminated') }}</div>
</div>